version: '3'

tasks:
  default:
    deps:
      - plugin_manager
      - plugin_install

  plugin_manager:
    desc: >
      Intall plug.vim
    cmd: |
      curl \
         --create-dirs --fail --location \
         --output {{.HOME}}/.vim/autoload/plug.vim \
         https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

  plugin_install:
    desc: >
      Trigger vim's Plug system to install plugins.
    deps:
      - plugin_manager
    cmd: >
      vim
        +:PlugInstall
        +:PlugUpdate
        "+:CocInstall coc-json"
        "+:CocInstall coc-yaml"
        "+:CocInstall coc-jedi"
        +:qall
